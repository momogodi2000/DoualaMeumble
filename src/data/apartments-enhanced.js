/**
 * Enhanced Apartments Data Layer
 * Comprehensive apartment data with all premium features
 */

export const QUARTERS = {
  BONAPRISO: {
    id: 'bonapriso',
    name: 'Bonapriso',
    description: 'Quartier r√©sidentiel haut de gamme',
    coordinates: { lat: 4.0546, lng: 9.7679 },
    features: ['Restaurants', 'Centres commerciaux', 'Bureaux', 'S√©curit√© 24h'],
    averagePrice: 45000,
    popularity: 95
  },
  BONANJO: {
    id: 'bonanjo',
    name: 'Bonanjo',
    description: 'Centre administratif et commercial',
    coordinates: { lat: 4.0483, lng: 9.7042 },
    features: ['Centre-ville', 'Administrations', 'Banques', 'Port'],
    averagePrice: 35000,
    popularity: 85
  },
  AKWA: {
    id: 'akwa',
    name: 'Akwa',
    description: 'Quartier moderne et dynamique',
    coordinates: { lat: 4.0691, lng: 9.7351 },
    features: ['Shopping', 'Restaurants', 'Vie nocturne', 'Business'],
    averagePrice: 40000,
    popularity: 80
  },
  BALI: {
    id: 'bali',
    name: 'Bali',
    description: 'Zone r√©sidentielle calme',
    coordinates: { lat: 4.0123, lng: 9.7456 },
    features: ['R√©sidentiel', '√âcoles', 'H√¥pitaux', 'Tranquille'],
    averagePrice: 30000,
    popularity: 70
  },
  BONAMOUSSADI: {
    id: 'bonamoussadi',
    name: 'Bonamoussadi',
    description: 'Quartier r√©sidentiel moderne et s√©curis√©',
    coordinates: { lat: 4.0891, lng: 9.7123 },
    features: ['R√©sidentiel premium', '√âcoles internationales', 'Centres m√©dicaux', 'Complexes sportifs'],
    averagePrice: 50000,
    popularity: 90
  },
  MAKEPE: {
    id: 'makepe',
    name: 'Makepe College Orchide',
    description: 'Quartier √©tudiant moderne avec toutes commodit√©s',
    coordinates: { lat: 4.0756, lng: 9.7234 },
    features: ['√âcoles', 'Universit√©s', 'Transport', 'Commerces'],
    averagePrice: 35000,
    popularity: 85
  },
  LOGBESSOU: {
    id: 'logbessou',
    name: 'Logbessou',
    description: 'Quartier en d√©veloppement avec constructions neuves',
    coordinates: { lat: 4.0623, lng: 9.7456 },
    features: ['Constructions neuves', 'Infrastructures modernes', 'Calme', 'Accessible'],
    averagePrice: 40000,
    popularity: 75
  }
};

export const APARTMENT_TYPES = {
  STUDIO: { id: 'studio', name: 'Studio', rooms: 0 },
  T1: { id: 't1', name: 'T1', rooms: 1 },
  T2: { id: 't2', name: 'T2', rooms: 2 },
  T3: { id: 't3', name: 'T3', rooms: 3 },
  T4: { id: 't4', name: 'T4+', rooms: 4 }
};

export const AMENITIES = {
  // Essential
  WIFI: { id: 'wifi', name: 'WiFi Haut D√©bit', category: 'essential', icon: 'üì∂' },
  AC: { id: 'ac', name: 'Climatisation', category: 'essential', icon: '‚ùÑÔ∏è' },
  KITCHEN: { id: 'kitchen', name: 'Cuisine √âquip√©e', category: 'essential', icon: 'üç≥' },
  
  // Comfort
  TV: { id: 'tv', name: 'TV 4K', category: 'comfort', icon: 'üì∫' },
  WASHING: { id: 'washing', name: 'Lave-linge', category: 'comfort', icon: 'üëï' },
  IRON: { id: 'iron', name: 'Fer √† repasser', category: 'comfort', icon: 'üëî' },
  
  // Luxury
  BALCONY: { id: 'balcony', name: 'Balcon/Terrasse', category: 'luxury', icon: 'üåÖ' },
  VIEW: { id: 'view', name: 'Vue Panoramique', category: 'luxury', icon: 'üëÅÔ∏è' },
  PARKING: { id: 'parking', name: 'Parking Priv√©', category: 'luxury', icon: 'üöó' },
  
  // Services
  CLEANING: { id: 'cleaning', name: 'Service M√©nage', category: 'service', icon: 'üßπ' },
  CONCIERGE: { id: 'concierge', name: 'Conciergerie 24h', category: 'service', icon: 'üõéÔ∏è' },
  SECURITY: { id: 'security', name: 'S√©curit√© 24h', category: 'service', icon: 'üõ°Ô∏è' }
};

export const APARTMENTS_DATA = [
  // 01 - Studio Premium Bonamoussadi
  {
    id: 'apt_001',
    title: 'Studio Premium Bonamoussadi',
    subtitle: 'Luxe ‚Ä¢ Moderne ‚Ä¢ S√©curis√©',
    type: APARTMENT_TYPES.STUDIO,
    quarter: QUARTERS.BONAMOUSSADI,
    
    // Location Details
    address: 'Bonamoussadi, Douala',
    coordinates: { lat: 4.0891, lng: 9.7123 },
    
    // Property Details
    surface: 38,
    bedrooms: 1,
    bathrooms: 1,
    capacity: 2,
    floor: 1,
    
    // Pricing (FCFA)
    pricing: {
      daily: 28000,
      weekly: 170000,
      monthly: 580000,
      extraPersonFee: 5000,
      cleaningFee: 15000,
      deposit: 56000
    },
    
    // Availability
    availability: {
      status: 'available',
      nextAvailable: '2025-08-20',
      minimumStay: 1,
      maximumStay: 90
    },
    
    // All Bonamoussadi Images from public/images
    images: [
      '/images/salon bonamousadi.jpg',
      '/images/cuisine bonamousadi.jpg', 
      '/images/chambre bonamousadi.jpg',
      '/images/salle a marche bonamousadi.jpg',
      '/images/salon vip bonamousadi.jpg',
      '/images/salon 3 bonamousadi.jpg',
      '/images/cuisiwn 2 bonamousadi.jpg',
      '/images/photo-bonamousadi.jpg',
      '/images/photo-bonamousadi-2.jpg',
      '/images/photo-bonamousadi-3.jpg',
      '/images/photo-bonamousadi-4.jpg',
      '/images/photo-bonamousadi-5.jpg'
    ],

    // Photo gallery organized by categories
    photoGallery: {
      exterior: [
        { url: '/images/photo-bonamousadi.jpg', caption: 'Vue ext√©rieure de la r√©sidence' },
        { url: '/images/photo-bonamousadi-2.jpg', caption: 'Entr√©e principale s√©curis√©e' },
        { url: '/images/photo-bonamousadi-3.jpg', caption: 'Parking priv√© s√©curis√©' }
      ],
      living: [
        { url: '/images/salon bonamousadi.jpg', caption: 'Salon spacieux avec TV 4K' },
        { url: '/images/salon vip bonamousadi.jpg', caption: 'Espace VIP √©l√©gant' },
        { url: '/images/salon 3 bonamousadi.jpg', caption: 'Salon avec vue panoramique' }
      ],
      bedrooms: [
        { url: '/images/chambre bonamousadi.jpg', caption: 'Chambre confortable avec dressing' }
      ],
      kitchen: [
        { url: '/images/cuisine bonamousadi.jpg', caption: 'Cuisine moderne enti√®rement √©quip√©e' },
        { url: '/images/cuisiwn 2 bonamousadi.jpg', caption: '√âlectrom√©nager haut de gamme' }
      ],
      bathrooms: [
        { url: '/images/salle a marche bonamousadi.jpg', caption: 'Salle de bain moderne' }
      ]
    },

    // Video presentations from public/videos
    videos: [
      {
        id: 'studio_bonamoussadi_presentation',
        title: 'Pr√©sentation Studio Bonamoussadi',
        description: 'D√©couvrez notre magnifique studio √† Bonamoussadi',
        thumbnail: '/images/salon bonamousadi.jpg',
        url: '/videos/Presentation studio bonamousadi.mp4',
        duration: '2:30',
        type: 'presentation'
      },
      {
        id: 'general_presentation',
        title: 'Pr√©sentation G√©n√©rale',
        description: 'Vue d\'ensemble de nos services',
        thumbnail: '/images/salon vip bonamousadi.jpg',
        url: '/videos/presentation.mp4',
        duration: '1:45',
        type: 'overview'
      }
    ],
    
    // Amenities
    amenities: [
      AMENITIES.WIFI,
      AMENITIES.AC,
      AMENITIES.KITCHEN,
      AMENITIES.TV,
      AMENITIES.WASHING,
      AMENITIES.BALCONY,
      AMENITIES.PARKING,
      AMENITIES.CLEANING,
      AMENITIES.SECURITY
    ],
    
    // Reviews
    rating: {
      average: 4.9,
      count: 24,
      breakdown: {
        5: 20,
        4: 3,
        3: 1,
        2: 0,
        1: 0
      }
    },
    
    // SEO & Marketing
    badges: [
      { type: 'featured', label: 'Studio Vedette' },
      { type: 'premium', label: 'Premium' }
    ],
    
    featured: true,
    popular: true,
    
    // Business Logic
    instantBooking: true,
    whatsappMessage: "Bonjour ! Je souhaite r√©server le Studio Premium Bonamoussadi :",
    
    // Additional Info
    description: `
      D√©couvrez ce magnifique studio premium au c≈ìur de Bonamoussadi, parfait pour 
      les professionnels et couples. Enti√®rement meubl√© avec go√ªt, 
      il offre tout le confort n√©cessaire pour un s√©jour d'exception.
      
      Quartier s√©curis√© 24h/7j avec toutes les commodit√©s √† proximit√©.
    `,
    
    highlights: [
      'Studio enti√®rement √©quip√© et meubl√©',
      'Quartier r√©sidentiel s√©curis√© 24h/7j',
      'Proche √©coles et centres commerciaux',
      'Parking priv√© inclus',
      'WiFi haut d√©bit gratuit',
      'Service de m√©nage inclus'
    ],
    
    rules: [
      'Non-fumeur',
      'Animaux non autoris√©s',
      'F√™tes interdites',
      'Check-in: 14h - Check-out: 12h',
      'Respect du voisinage requis'
    ]
  },

  // 02 - Appartement Makepe College Orchide  
  {
    id: 'apt_002',
    title: 'Appartement Makepe College Orchide',
    subtitle: '√âtudiant ‚Ä¢ Accessible ‚Ä¢ Moderne',
    type: APARTMENT_TYPES.T2,
    quarter: QUARTERS.MAKEPE,
    
    address: 'College Orchide, Makepe, Douala',
    coordinates: { lat: 4.0756, lng: 9.7234 },
    
    surface: 55,
    bedrooms: 2,
    bathrooms: 1,
    capacity: 4,
    floor: 2,
    
    pricing: {
      daily: 28000,
      weekly: 168000,
      monthly: 720000,
      extraPersonFee: 3000,
      cleaningFee: 12000,
      deposit: 56000
    },
    
    availability: {
      status: 'available',
      nextAvailable: '2025-08-20',
      minimumStay: 1,
      maximumStay: 365
    },
    
    images: [
      '/images/photo-akwa.jpg',
      '/images/photo-akwa-2.jpg',
      '/images/photo-bonapriso.jpg'
    ],

    photoGallery: {
      exterior: [
        { url: '/images/photo-akwa.jpg', caption: 'Vue ext√©rieure du b√¢timent' }
      ],
      living: [
        { url: '/images/photo-akwa-2.jpg', caption: 'Salon spacieux avec TV' }
      ],
      bedrooms: [
        { url: '/images/photo-bonapriso.jpg', caption: 'Chambres confortables' }
      ]
    },

    videos: [],
    
    amenities: [
      AMENITIES.WIFI,
      AMENITIES.AC,
      AMENITIES.KITCHEN,
      AMENITIES.TV,
      AMENITIES.WASHING,
      AMENITIES.PARKING,
      AMENITIES.SECURITY
    ],
    
    rating: {
      average: 4.6,
      count: 12,
      breakdown: {
        5: 7,
        4: 4,
        3: 1,
        2: 0,
        1: 0
      }
    },
    
    badges: [
      { type: 'student', label: '√âtudiant Friendly' }
    ],
    
    featured: false,
    popular: false,
    
    instantBooking: true,
    whatsappMessage: "Bonjour ! Je souhaite r√©server l'Appartement Makepe College Orchide :",
    
    description: `
      Appartement parfait pour √©tudiants et jeunes professionnels pr√®s du College Orchide.
      Proximit√© des universit√©s et facilit√©s de transport. Id√©al pour partage √† plusieurs.
    `,
    
    highlights: [
      'Proche universit√©s et √©coles',
      'Transport accessible',
      'Parfait pour √©tudiants',
      'Prix abordable',
      'S√©curit√© assur√©e'
    ],
    
    rules: [
      'Non-fumeur',
      'Animaux non autoris√©s',
      'Respect du voisinage',
      'Check-in: 15h - Check-out: 11h'
    ]
  },

  // 03 - Nouvel Appartement Logbessou
  {
    id: 'apt_003', 
    title: 'Nouvel Appartement Logbessou',
    subtitle: 'Neuf ‚Ä¢ Moderne ‚Ä¢ Spacieux',
    type: APARTMENT_TYPES.T3,
    quarter: QUARTERS.LOGBESSOU,
    
    address: 'Logbessou, Douala',
    coordinates: { lat: 4.0623, lng: 9.7456 },
    
    surface: 75,
    bedrooms: 3,
    bathrooms: 2,
    capacity: 6,
    floor: 1,
    
    pricing: {
      daily: 45000,
      weekly: 270000,
      monthly: 1170000,
      extraPersonFee: 7000,
      cleaningFee: 20000,
      deposit: 90000
    },
    
    availability: {
      status: 'available',
      nextAvailable: '2025-08-20',
      minimumStay: 2,
      maximumStay: 365
    },
    
    images: [
      '/images/admin-sorel2.jpg',
      '/images/sorel-admin.jpg'
    ],

    photoGallery: {
      exterior: [
        { url: '/images/admin-sorel2.jpg', caption: 'Construction neuve moderne' }
      ],
      living: [
        { url: '/images/sorel-admin.jpg', caption: 'Espace de vie spacieux' }
      ]
    },

    videos: [],
    
    amenities: [
      AMENITIES.WIFI,
      AMENITIES.AC,
      AMENITIES.KITCHEN,
      AMENITIES.TV,
      AMENITIES.WASHING,
      AMENITIES.IRON,
      AMENITIES.BALCONY,
      AMENITIES.PARKING,
      AMENITIES.CLEANING,
      AMENITIES.SECURITY
    ],
    
    rating: {
      average: 4.8,
      count: 8,
      breakdown: {
        5: 6,
        4: 2,
        3: 0,
        2: 0,
        1: 0
      }
    },
    
    badges: [
      { type: 'new', label: 'Nouveau' },
      { type: 'spacious', label: 'Spacieux' }
    ],
    
    featured: true,
    popular: false,
    
    instantBooking: true,
    whatsappMessage: "Bonjour ! Je souhaite r√©server le Nouvel Appartement Logbessou :",
    
    description: `
      Tout nouveau appartement T3 dans le quartier en d√©veloppement de Logbessou.
      Construction r√©cente avec toutes les commodit√©s modernes. 
      Parfait pour familles ou groupes d'amis.
    `,
    
    highlights: [
      'Construction enti√®rement neuve',
      'Appartement spacieux T3',
      'Infrastructures modernes',
      'Quartier calme et r√©sidentiel',
      'Id√©al pour familles',
      '√âquipements haut de gamme'
    ],
    
    rules: [
      'Non-fumeur',
      'Animaux sur demande',
      'Respect du voisinage requis',
      'Check-in: 14h - Check-out: 12h',
      'Maximum 6 personnes'
    ]
  }
];

// Business Logic Functions
export const getFeaturedApartments = () => {
  return APARTMENTS_DATA.filter(apartment => apartment.featured);
};

export const getPopularApartments = () => {
  return APARTMENTS_DATA.filter(apartment => apartment.popular);
};

export const getApartmentsByQuarter = (quarterId) => {
  return APARTMENTS_DATA.filter(apartment => apartment.quarter?.id === quarterId);
};

export const searchApartments = (searchQuery) => {
  const query = searchQuery.toLowerCase();
  return APARTMENTS_DATA.filter(apartment =>
    apartment.title.toLowerCase().includes(query) ||
    apartment.description.toLowerCase().includes(query) ||
    apartment.quarter?.name.toLowerCase().includes(query)
  );
};

export const filterApartments = (filters) => {
  return APARTMENTS_DATA.filter(apartment => {
    // Price range filter
    if (filters.priceRange) {
      const { min, max } = filters.priceRange;
      if (apartment.pricing.daily < min || apartment.pricing.daily > max) {
        return false;
      }
    }
    
    // Type filter
    if (filters.type && apartment.type.id !== filters.type) {
      return false;
    }
    
    // Quarter filter
    if (filters.quarter && apartment.quarter.id !== filters.quarter) {
      return false;
    }
    
    // Capacity filter
    if (filters.capacity && apartment.capacity < filters.capacity) {
      return false;
    }
    
    // Amenities filter
    if (filters.amenities && filters.amenities.length > 0) {
      const apartmentAmenityIds = apartment.amenities.map(a => a.id);
      const hasAllAmenities = filters.amenities.every(amenityId => 
        apartmentAmenityIds.includes(amenityId)
      );
      if (!hasAllAmenities) {
        return false;
      }
    }
    
    return true;
  });
};

export const calculatePricing = (apartment, nights, guests = 1) => {
  let basePrice = apartment.pricing.daily * nights;
  
  // Weekly discount (7+ nights)
  if (nights >= 7) {
    basePrice = apartment.pricing.weekly * Math.floor(nights / 7) + 
                 apartment.pricing.daily * (nights % 7);
  }
  
  // Monthly discount (30+ nights)
  if (nights >= 30) {
    basePrice = apartment.pricing.monthly * Math.floor(nights / 30) + 
                 apartment.pricing.daily * (nights % 30);
  }
  
  // Extra guest fees
  const extraGuests = Math.max(0, guests - apartment.capacity);
  const extraGuestFees = extraGuests * apartment.pricing.extraPersonFee * nights;
  
  const subtotal = basePrice + extraGuestFees;
  const cleaningFee = apartment.pricing.cleaningFee;
  
  return {
    subtotal,
    cleaningFee,
    total: subtotal + cleaningFee,
    nights,
    pricePerNight: apartment.pricing.daily,
    extraGuestFees
  };
};
